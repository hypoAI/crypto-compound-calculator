# 加密货币复利计算器PRD文档

## 产品概述

专业的国际版加密货币和股票投资复利计算器，支持定投策略、实时可视化和地域化社交分享功能。

## 功能优先级

### P0级功能（基础版 - 必须实现）

#### 1. 国际化支持

**功能描述**：

- 多语言切换：支持中文、英文双语切换
- 本地化显示：数字格式化、货币符号本地化

**交互流程**：

- 用户首次访问检测浏览器语言自动设置
- 右上角语言切换按钮，点击弹出选择菜单
- 切换后立即更新所有文本内容和数字格式
- 语言偏好本地存储，下次访问自动应用

#### 2. 核心计算功能

**功能描述**：

- **复利计算**：支持年复利、月复利、日复利计算，实时结果更新
- **定投计算（DCA）**：支持每月定期追加投资，显示定投累计收益
- **资产类型**：比特币、美股指数、银行理财产品预设场景

**交互流程**：

```
1. 首页场景选择 → 2. 参数输入 → 3. 实时计算 → 4. 结果展示
   ↓
场景卡片点击 → 输入框实时验证 → 计算结果即时更新 → 图表动态渲染
```

**详细交互**：

- **场景选择**：三个卡片式选项，点击后高亮边框
- **参数输入**：
  - 初始投资：数字输入框，支持快捷选项（$100, $1000, $10000）
  - 定投金额：滑块+输入框，范围$10-$10000
  - 投资期限：滑块选择1-30年
  - 年化收益率：预设选项（5%, 8%, 12%, 15%）+自定义输入
- **实时反馈**：参数变化时图表平滑过渡，数字滚动动画

#### 3. 可视化展示

**功能描述**：

- **资产增长曲线**：Chart.js动态图表，响应式设计
- **收益构成图**：本金vs收益饼图，交互式图例

**交互流程**：

- **图表切换**：顶部Tab切换折线图/饼图
- **时间轴缩放**：鼠标滚轮或双指缩放，双击重置
- **数据点悬停**：显示具体日期、资产价值、收益金额
- **图例交互**：点击图例可隐藏/显示对应数据系列
- **全屏模式**：移动端支持横屏全屏查看

#### 4. 地域化社交分享功能

**功能描述**：

- **中国用户**：微信分享（朋友圈、好友）
- **国际用户**：Twitter/X分享、Facebook分享
- **通用功能**：生成海报、PNG下载、链接复制

**交互流程**：

```
检测地区 → 显示对应分享按钮 → 选择分享方式 → 生成内容 → 完成分享
   ↓
IP/浏览器语言 → 微信图标或Twitter图标 → 点击触发原生分享 → 生成海报 → 跳转对应App
```

**详细交互**：

- **地区检测**：
  - 优先检测浏览器语言
  - 其次检测IP地理位置
- **微信分享**：
  - 生成微信小程序码（需后端支持）
  - 海报包含投资结果和二维码
- **Twitter分享**：
  - 预填充推文模板
  - 自动生成#投资 #复利 等标签
- **海报生成**：
  - 3秒生成动画
  - 长按保存图片
  - 支持自定义背景模板

#### 5. 移动端优化

**功能描述**：

- 响应式布局，触摸友好交互

**交互流程**：

- **手势支持**：
  - 左滑切换场景
  - 双指缩放图表
- **输入优化**：
  - 数字键盘自动弹出
  - 滑块支持精确调节

#### 6. 代码保护（P0级）

**功能描述**：

- 代码混淆防止反编译
- 防开发者工具调试
- 核心算法加密

**交互流程**：

- **加载时检测**：
  - 检测开发者工具开启状态
  - 发现调试行为显示警告并延迟加载
- **运行时保护**：
  - 关键计算逻辑动态加密
  - 防内存dump机制
  - 代码完整性校验

### P1级功能（高级版 - 后续迭代）

#### 1. 实时数据源接入

**功能描述**：

- Alpha Vantage股票数据
- CoinGecko加密货币数据
- 12种加密货币支持
- 动态汇率转换

**交互流程**：

```
激活高级版 → 选择币种 → 实时价格显示 → 历史数据加载 → 计算更新
   ↓
输入许可证密钥 → 下拉选择框 → 价格实时刷新 → 加载动画 → 结果重新计算
```

**详细交互**：

- **币种选择**：
  - 搜索框支持模糊匹配
  - 收藏常用币种
  - 显示24h涨跌幅
- **价格更新**：
  - 每30秒自动刷新
  - 价格变化绿色/红色动画
  - 手动刷新按钮

#### 2. 高级分析报告

**功能描述**：

- PDF专业投资报告
- CSV数据导出
- 自定义品牌logo

**交互流程**：

- **报告生成**：
  - 选择时间范围（1年/5年/全部）
  - 选择包含内容（图表/数据/分析）
  - 上传品牌logo（企业版）
  - 10秒生成进度条
- **导出选项**：
  - PDF：高分辨率图表，专业排版
  - CSV：Excel兼容，包含公式
  - 邮件发送（可选）

#### 3. 通胀调整功能

**功能描述**：

- CPI数据实时接入
- 通胀调整后真实收益
- 世界银行API数据

**交互流程**：

- **通胀开关**：
  - 一键开启/关闭通胀调整
  - 显示当前CPI数值和日期
  - 悬停显示数据来源
- **调整后显示**：
  - 虚线显示名义收益
  - 实线显示实际收益
  - 差异百分比标注

#### 4. 企业级功能

**功能描述**：

- RESTful API接入
- 白标签解决方案
- 定制域名支持

**交互流程**：

- **API接入**：
  - 开发者控制台获取API密钥
  - 实时API使用统计
  - 代码示例生成器
- **白标签配置**：
  - 域名绑定向导
  - 品牌颜色选择器
  - Logo上传和预览

## 用户体验流程图

### P0级完整用户流程

```
首次访问
    ↓
语言检测 → 场景选择 → 参数输入 → 实时计算 → 结果展示 → 分享选择
    ↓        ↓        ↓        ↓        ↓        ↓
自动设置   卡片点击   滑块调节   图表动画   数据悬停   地区检测
    ↓        ↓        ↓        ↓        ↓        ↓
可手动切换  高亮反馈  实时验证  平滑过渡  详细信息  分享完成
```

### P1级激活流程

```
购买许可证 → 输入密钥 → 验证成功 → 功能解锁 → 高级功能使用
    ↓        ↓        ↓        ↓        ↓
Gumroad页面  粘贴输入  成功提示  UI更新   新功能引导
```

## 异常处理

- **网络异常**：离线模式提示，使用缓存数据
- **计算超时**：显示加载动画，超时后简化计算
- **分享失败**：提供备选方案（如直接保存图片）
- **密钥验证失败**：详细错误提示，客服联系方式

## 性能指标

- **首次加载**：< 3秒
- **计算响应**：< 100ms
- **图表渲染**：< 500ms
- **分享生成**：< 5秒

## 部署方案

- **平台**：GitHub Pages
- **CDN**：Cloudflare全球加速
- **域名**：主域名 + 自定义域名（P1）
- **监控**：Google Analytics + 性能监控
